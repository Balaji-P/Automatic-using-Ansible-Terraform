---
- hosts:
  - localhost
  vars:
    environment: dev
  roles:
  - role: aws-terraform
    terraform_directory: terraform-deployment # Name of the directory to deploy
    state: present
    backend_config:
      bucket: jayetfbackend
      key: "provision.tfstate"
      access_key: "{{ lookup('env','AWS_SECRET_ACCESS_KEY') }}"
      secret_key: "{{ lookup('env','AWS_SECRET_KEY') }}"
      region: "{{ lookup('env','AWS_REGION') }}"
    variables:
      access_key: "{{ lookup('env','AWS_SECRET_ACCESS_KEY') }}"
      secret_key: "{{ lookup('env','AWS_SECRET_KEY') }}"
      region: "{{ lookup('env','AWS_REGION') }}"